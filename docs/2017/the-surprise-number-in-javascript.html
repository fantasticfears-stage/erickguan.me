<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.5.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>The Surprising Number in JavaScript - Blog</title>




<meta name="description" content="Did you know you can not have a number larger than  in JavaScript?">




<meta name="author" content="Erick Guan">

<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Blog">
<meta property="og:title" content="The Surprising Number in JavaScript">


  <link rel="canonical" href="https://erickguan.me/2017/the-surprise-number-in-javascript">
  <meta property="og:url" content="https://erickguan.me/2017/the-surprise-number-in-javascript">



  <meta property="og:description" content="Did you know you can not have a number larger than  in JavaScript?">



  <meta name="twitter:site" content="@erickguan">
  <meta name="twitter:title" content="The Surprising Number in JavaScript">
  <meta name="twitter:description" content="Did you know you can not have a number larger than  in JavaScript?">
  <meta name="twitter:url" content="https://erickguan.me/2017/the-surprise-number-in-javascript">

  
    <meta name="twitter:card" content="summary">
    
  

  
    <meta name="twitter:creator" content="@Erick Guan">
  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-08-23T00:00:00+02:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Erick Guan",
      "url" : "https://erickguan.me",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://erickguan.me/feed.xml" type="application/atom+xml" rel="alternate" title="Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://erickguan.me/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#da532c">
<meta name="apple-mobile-web-app-title" content="Erick Guan">
<meta name="application-name" content="Erick Guan">
<meta name="theme-color" content="#ffffff">

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://erickguan.me/">Blog</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="https://erickguan.me/about">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://algalon.net">中文</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="The Surprising Number in JavaScript">
    <meta itemprop="description" content="Did you know you can not have a number larger than  in JavaScript?">
    <meta itemprop="datePublished" content="August 23, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">The Surprising Number in JavaScript
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>Did you know you can not have a number larger than <script type="math/tex">2^{53}-1</script> in JavaScript?</p>

<p>You might try this in Chrome Developer Console and want to tell me that it works in  Chrome.</p>

<p>It works because you are lucky.</p>

<h2 id="what-is-a-number">What is a Number?</h2>

<p>Let’s take a step back and review what is a number. Is <script type="math/tex">2^{53}</script> a number in JavaScript?</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nb">Number</span><span class="p">.</span><span class="nx">isInteger</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">53</span><span class="p">)</span> <span class="c1">// true</span>
</code></pre>
</div>

<p>It works out right. So what’s the matter?</p>

<p>It’s not <em>safe</em>. It’s not safe because the number you hold may lose its percision if it’s larger.</p>

<p>Your user may complain they lose their money when they type a large number.
<code class="highlighter-rouge">9007199254740992</code>. You may lose your rocket in the sky because its position goes wrong.</p>

<p>That’s why you don’t trust the input and the reason you remember to check.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nb">Number</span><span class="p">.</span><span class="nx">isSafeInteger</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">53</span><span class="p">)</span> <span class="c1">// false</span>
</code></pre>
</div>

<p>Chrome represents integer more than ECMAScript required because its implementation details in V8.</p>

<p>If you read the great MDN, you’ll find:</p>

<blockquote>
  <p>According to the ECMAScript standard, there is only one number type: the double-precision 64-bit binary format IEEE 754 value (number between <script type="math/tex">-(2^{53}-1)</script> and <script type="math/tex">2^{53}-1</script>). There is no specific type for integers. In addition to being able to represent floating-point numbers, the number type has three symbolic values: +Infinity, -Infinity, and NaN (not-a-number).</p>
</blockquote>

<p>You are not using Python, C/C++ or Ruby. There isn’t a type for integer in JavaScript.
Your integer at your hand
is just a <code class="highlighter-rouge">Number</code> in JavaScript. JavaScript is weak in typing opposing to other
dynamic language in which allows you to represent infinite large number.</p>

<p>The standard says that it’s a IEEE 754 value.</p>

<p>If you use Python and Ruby, you pay the price when you use large number which probably you rarely make use of. So does the copy on right (CoW) in string to C++. But you are benifit to know
such information. It indicates you optimize for the right direction.
You don’t optimize for the extreme large number if you don’t encounter it frequently.
You optimize string view rather than CoW in C++17.
But in JavaScript, Python and Ruby. You enjoyed the fact that they has a type (class or object).</p>

<p>Such OO concept helps you encapsulate logic or anything.</p>

<p>In JavaScript, you also have bizarre pieces like <code class="highlighter-rouge">+Infinity</code>, <code class="highlighter-rouge">-Infinity</code>, <code class="highlighter-rouge">NaN</code> and our famous equality table along with the <code class="highlighter-rouge">Number</code> object.</p>

<p><img src="/assets/images/2017/js-equality-table.png" /></p>

<h3 id="grown-designed">Grown? Designed?</h3>

<p>Why is that?</p>

<p>JavaScript starts as a prototype project and designed by one person in 1995.</p>

<p>It was the browser war time. So there is 
Netscape (former Mozilla), Microsoft and hackers (KHTML &amp; WebKit). In particular, Brendan Eich was recruited by Netscape and
assigned the task to design the language with the the goal of embedding Scheme.
Netscape believed it would be important. And here came the other major vendors.
With the collaboration with Sun, the language in development should looks like Java to compete with Microsoft.</p>

<p>Such a important job is not held by a group of proferssoers as you might imagine.
The desiner at the time was only Brendan Eich. He invented the
prototype in 10 days, in May 1995.</p>

<h4 id="a-story-from-make">A story from make</h4>

<p>Let’s have some perspecitve. It’s 1995. Web is little to be known. People talks about Java, C++, Unix, internet, HTML and etc.</p>

<p>It was different.</p>

<p>You have a
internet community and your lovely package manager like npm and bundler nowadays.
Everything are done for you and you believed there is somebody who will take care
something. You can talk about projects and think about the faults that your fellow
made so that you can fix in your new project.</p>

<p>Non of that happens for Brendan Eich.</p>

<p>I’m about to get the point but let’s talk about <code class="highlighter-rouge">make</code> instead.
Do you know what we still suffer in making a C/C++ project? Because we
still uses Makefile. <code class="highlighter-rouge">make</code> was a program in Unix to define how the dependency of
objects file should be resolved.
It was written by one person and intended
to be shared with friends.
The inventor went on ahead and starts command with tab without think too much.
The tab in a makefile is treat different than spaces.
It’s a fine choice at the time and they came up the idea to include it into the standard UNIX package. Would that be wonderful, right?</p>

<p>So wrong. We suffer because of those ten guys.</p>

<p>The code aged but you can not revert time. The code is the logic that you don’t want to redo. It becomes dominant then you couldn’t change it without breaking things.
C++ pays the price for compatability. Python pays the price too. They pay it differently.</p>

<p>People can’t love what they don’t know. People want to be part of something.</p>

<p>From JavaScript 1.0 to ECMAScript 2017, the JavaScript could not be redesigned
because it was put on the market for way too long.
It’s grown to this position. It was designed but it can not be designed now to gain
the same dominance.</p>

<h4 id="javascript">JavaScript</h4>

<p>Douglas Crockford, the creator of JSON said,</p>

<blockquote>
  <p>JavaScript is built on some very good ideas and a few very bad ones.</p>
</blockquote>

<p>A committe of experts in programming language may still deliver obscure syntax
for a programing language.
Could you blame JavaScript for a 10 day one man project?</p>

<p>But why we suffer from this? Can we reboot it like Python 3? Probabaly no.
Because we don’t have a choice. It’s bundled with the browser and DOM.
We live in an aftermath with survival like Chrome, Firefox and Safari.
Chrome shows the power of programming in user browser and we can never go back.
Node.js is on the market for years.</p>

<p>JavaScript has grown. It evolves. Years.</p>

<h2 id="its-terrible-the-take-away">It’s terrible? The take away</h2>

<p>Lie on your back. LOOK at how it’s successful as a language. It’s universal now.</p>

<p>We all know there is no perfect language. JavaScript is no different.
JavaScript can be really surprised
in types. But don’t you happy with the first-class functions? closures? object literals? And performance?</p>

<p>So as a programmer, why not setup your linter if you have committed the very same
mistakes many times.
Just do more coding.</p>

<p>And don’t design without thinking. Do think twice when you design. Someone may suffer . You may suffer.</p>

<p><em>Thanks my friend @lextm for reviewing the draft.</em></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://erickguan.me/tags/#programing-language" class="page__taxonomy-item" rel="tag">Programing Language</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-08-23T00:00:00+02:00">August 23, 2017</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=erickguan&text=The+Surprising+Number+in+JavaScript%20https%3A%2F%2Ferickguan.me%2F2017%2Fthe-surprise-number-in-javascript" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ferickguan.me%2F2017%2Fthe-surprise-number-in-javascript" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https%3A%2F%2Ferickguan.me%2F2017%2Fthe-surprise-number-in-javascript" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Ferickguan.me%2F2017%2Fthe-surprise-number-in-javascript" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://erickguan.me/2017/copy-and-paste-bookmarklet" class="pagination--pager" title="Copy and Paste Bookmarklet
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
    
        <h4 class="page__comments-title">Leave a Comment</h4>
        <section id="disqus_thread"></section>
      
</div>
    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/erickguan"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/fantasticfears"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="https://erickguan.me/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Erick Guan. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="https://erickguan.me/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36993160-8', 'auto');
  ga('send', 'pageview');
</script>





  
      
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://erickguan.me/2017/the-surprise-number-in-javascript";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/2017/the-surprise-number-in-javascript"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://fftenacity.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    



  </body>
</html>
