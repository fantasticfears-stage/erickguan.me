<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.4.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Complicated Wikipedia Scripts Management - Blog</title>




<meta name="description" content="After MediaWiki 1.23/wmf3 had been deployed to all Wikimedia sites, old collapse element didn’t work any more on zhwikipedia. The administrator Liangent deleted the old(2009 or even before)  code using pure JavaScript API on MediaWiki:Common.js. Then we tried to solve these mess.">




<meta name="author" content="Erick Guan">

<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Blog">
<meta property="og:title" content="Complicated Wikipedia Scripts Management">


  <link rel="canonical" href="https://erickguan.me/2013/complicated-wikipedia-scripts-management">
  <meta property="og:url" content="https://erickguan.me/2013/complicated-wikipedia-scripts-management">



  <meta property="og:description" content="After MediaWiki 1.23/wmf3 had been deployed to all Wikimedia sites, old collapse element didn’t work any more on zhwikipedia. The administrator Liangent deleted the old(2009 or even before)  code using pure JavaScript API on MediaWiki:Common.js. Then we tried to solve these mess.">



  <meta name="twitter:site" content="@erickguan">
  <meta name="twitter:title" content="Complicated Wikipedia Scripts Management">
  <meta name="twitter:description" content="After MediaWiki 1.23/wmf3 had been deployed to all Wikimedia sites, old collapse element didn’t work any more on zhwikipedia. The administrator Liangent deleted the old(2009 or even before)  code using pure JavaScript API on MediaWiki:Common.js. Then we tried to solve these mess.">
  <meta name="twitter:url" content="https://erickguan.me/2013/complicated-wikipedia-scripts-management">

  
    <meta name="twitter:card" content="summary">
    
  

  
    <meta name="twitter:creator" content="@Erick Guan">
  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2013-09-10T00:00:00+02:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Erick Guan",
      "url" : "https://erickguan.me",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://erickguan.me/feed.xml" type="application/atom+xml" rel="alternate" title="Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://erickguan.me/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#da532c">
<meta name="apple-mobile-web-app-title" content="Erick Guan">
<meta name="application-name" content="Erick Guan">
<meta name="theme-color" content="#ffffff">

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://erickguan.me/">Blog</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="https://erickguan.me/about">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://algalon.net">中文</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Complicated Wikipedia Scripts Management">
    <meta itemprop="description" content="After MediaWiki 1.23/wmf3 had been deployed to all Wikimedia sites, old collapse element didn’t work any more on zhwikipedia. The administrator Liangent deleted the old(2009 or even before)  code using pure JavaScript API on MediaWiki:Common.js. Then we tried to solve these mess.">
    <meta itemprop="datePublished" content="September 10, 2013">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Complicated Wikipedia Scripts Management
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>After <a href="https://www.mediawiki.org/wiki/MediaWiki_1.23/wmf3">MediaWiki 1.23/wmf3</a> had been deployed to all Wikimedia sites, old collapse element didn’t work any more on zhwikipedia. The administrator Liangent deleted the old(2009 or even before)  code using pure JavaScript API on <em>MediaWiki:Common.js</em>. Then we tried to solve these mess.</p>

<h2 id="upstream">Upstream</h2>

<p>We decided to make use of upstream module - <a href="https://www.mediawiki.org/wiki/Manual:Collapsible_elements">jQuery.makeCollapsible</a>, for reducing maintenance costs. This is something should be done because local maintainers may leave and then a random release may break the local scripts which is really annoy admins. What’s more, this module has been already deployed on the zhwikipedia. After diting the class of some templates, it works fine. For the old collapsible element, we ported the code from the manual page and made two default gadgets. Apparently, these code is not maintained. I’ve spent some time to unify the code.</p>

<h2 id="local-version">Local version</h2>

<p>However, jQuery.makeCollapsible generates a alternative toggle block instead of toggling by clicking navigation bar which Chinese wikipedians are familiar with. There’s no way to modify the default behavior.</p>

<p>What’s worse, Chinese wikipedians depend heavily on the modified NavFrame and some local features.</p>

<p>Thus I fixed a subset features and left the more complicated feature alone.</p>

<h2 id="policy">Policy</h2>

<p>MediaWiki is highly praised for its customizability. For scripts, the core scripts, the site scripts, the skin scripts and the user scripts. It’s still manageable by a standalone installation. But Wikimedia is a big project. It’s far more complicated for developers to look after all the users around the world especially for small wikis. How could we advance frontend technology for Wikipedia? Providing solving the historical problems, we can easily deploy new styles and new ui styles.</p>

<p><a href="https://www.mediawiki.org/wiki/Extension:Scribunto">Lua</a> is considered as a new script language to replace the old template grammar. I’d like to use a script language while we still need the global module for lowering maintenance costs.That is to say, we have to limit the common template usage.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://erickguan.me/tags/#mediawiki" class="page__taxonomy-item" rel="tag">MediaWiki</a><span class="sep">, </span>
    
      
      
      <a href="https://erickguan.me/tags/#wiki" class="page__taxonomy-item" rel="tag">Wiki</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2013-09-10T00:00:00+02:00">September 10, 2013</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=erickguan&text=Complicated Wikipedia Scripts Management https://erickguan.me/2013/complicated-wikipedia-scripts-management" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://erickguan.me/2013/complicated-wikipedia-scripts-management" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://erickguan.me/2013/complicated-wikipedia-scripts-management" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://erickguan.me/2013/complicated-wikipedia-scripts-management" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      <a href="https://erickguan.me/2014/mechanize-encoding-problem-with-gbk" class="pagination--pager" title="Mechanize encoding problem with GBK
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
    
        <h4 class="page__comments-title">Leave a Comment</h4>
        <section id="disqus_thread"></section>
      
</div>
    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/erickguan"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/fantasticfears"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="https://erickguan.me/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Erick Guan. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="https://erickguan.me/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36993160-8', 'auto');
  ga('send', 'pageview');
</script>





  
      
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'fftenacity';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    



  </body>
</html>
